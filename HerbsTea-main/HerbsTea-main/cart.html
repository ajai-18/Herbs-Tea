<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HerbsTea - Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f5fff7; font-family: 'Segoe UI', sans-serif; color: #2d4739; }
    .navbar { background: linear-gradient(90deg, #2e7d32, #66bb6a); }
    .cart-item { border-radius: 12px; background: #fff; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .cart-item img { width: 100px; height: 100px; object-fit: cover; border-radius: 10px; }
    .btn-buy { background: #388e3c; color: white; border-radius: 25px; padding: 5px 15px; }
    .btn-cart { background: #fbc02d; border-radius: 25px; padding: 5px 15px; color: #2d4739; }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark shadow">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="index.html">ðŸŒ¿ HerbsTea</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="products.html">Products</a></li>
          <li class="nav-item position-relative">
            <a class="nav-link active" href="cart.html">Cart</a>
            <span id="cartCountBadge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"></span>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Cart Section -->
  <section class="container my-5">
    <h2 class="text-center mb-4">Your Cart ðŸ›’</h2>
    <div id="cartItems"></div>
    <div id="cartTotal" class="text-end mt-3"></div>
  </section>

  <script>
    // Product data (should match products.html)
    const products = [
      {id:1, name:"Organic Green Tea", price:150, img:"https://th.bing.com/th/id/OIP.pgedhJZo7rutkhgAzvuV9QHaE8?w=281&h=187&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:2, name:"Chamomile Tea", price:200, img:"https://th.bing.com/th/id/OIP.Z9YC1AoQAs7upYnM3snwvgHaHa?w=196&h=196&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:3, name:"Refreshing Mint Tea", price:120, img:"https://th.bing.com/th/id/OIP.HkyuzijrYwMfPg8-wytndgHaHa?w=169&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:4, name:"Lemon Honey Tea", price:180, img:"https://th.bing.com/th/id/OIP.FXmDQALJXnB4VX7mZQd6YQHaFS?w=268&h=192&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:5, name:"Tulsi Herbal Tea", price:170, img:"https://th.bing.com/th/id/OIP.vLxgE_82w3Awl_5GnXBxrAHaE8?w=252&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7"},
      {id:6, name:"Jasmine Tea", price:220, img:"https://th.bing.com/th/id/OIP.S9dPpnwvGBLklkNXXXRmrwHaE3?w=318&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:7, name:"Hibiscus Tea", price:210, img:"https://th.bing.com/th/id/OIP.A60NVwHCcETA_yQjFmU-zAHaD0?w=339&h=179&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:8, name:"Ginger Herbal Tea", price:160, img:"https://th.bing.com/th/id/OIP.6Nb-Zs8pF44Z0Y1MQdKA0AHaEj?w=275&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:9, name:"Darjeeling Black Tea", price:250, img:"https://th.bing.com/th/id/OIP.PudPcNOwrCwGoxAPlzckUwHaHZ?w=162&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:10, name:"Oolong Tea", price:270, img:"https://th.bing.com/th/id/OIP.33k97Y8GXQ5Wap8KU8lBDwHaKU?w=134&h=187&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:11, name:"White Tea", price:300, img:"https://th.bing.com/th/id/OIP.LvQnVliA0tWBydqvHF4ecAHaE8?w=230&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7"},
      {id:12, name:"Matcha Green Tea", price:320, img:"https://th.bing.com/th/id/OIP.Vf16FveEmDnw0jTBDlwFXQHaE8?w=290&h=193&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:13, name:"Kashmiri Kahwa", price:350, img:"https://i.ytimg.com/vi/1UGgtq4edtY/maxresdefault.jpg"},
      {id:14, name:"Masala Chai", price:140, img:"https://th.bing.com/th/id/OIP.1Jk7V5l69uDaxjrQVL7rnQHaLJ?w=203&h=306&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:15, name:"Rose Tea", price:230, img:"https://th.bing.com/th/id/OIP.B22iU7dQrPL3TVJZxB6l-AHaEo?w=295&h=184&c=7&r=0&o=7&dpr=1.3&pid=1.7"},
      {id:16, name:"Ayurvedic Detox Tea", price:280, img:"https://th.bing.com/th/id/OIP.3ey0o9_KmRkTAlr6JY03cwHaHa?w=180&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7"}
    ];

    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function updateCartBadge() {
      let count = cart.reduce((sum, item) => sum + item.qty, 0);
      document.getElementById('cartCountBadge').innerText = count > 0 ? count : '';
    }

    function renderCart() {
      let cartDiv = document.getElementById('cartItems');
      cartDiv.innerHTML = '';
      let total = 0;

      if(cart.length === 0) {
        cartDiv.innerHTML = "<p class='text-center'>Your cart is empty ðŸ›’</p>";
        document.getElementById('cartTotal').innerHTML = '';
        return;
      }

      cart.forEach(item => {
        let prod = products.find(p => p.id === item.productId);
        let itemTotal = prod.price * item.qty;
        total += itemTotal;

        cartDiv.innerHTML += `
          <div class="cart-item d-flex justify-content-between align-items-center">
            <img src="${prod.img}" alt="${prod.name}">
            <div class="ms-3 flex-grow-1">
              <h5>${prod.name}</h5>
              <p>Price: â‚¹${prod.price}</p>
              <p>
                Quantity: 
                <button class="btn btn-sm btn-outline-success" onclick="updateQty(${item.productId}, -1)">-</button>
                <span class="mx-2">${item.qty}</span>
                <button class="btn btn-sm btn-outline-success" onclick="updateQty(${item.productId}, 1)">+</button>
              </p>
              <p><strong>Total: â‚¹${itemTotal}</strong></p>
            </div>
            <div>
              <button class="btn btn-danger btn-sm mb-2" onclick="removeItem(${item.productId})">Remove</button>
            </div>
          </div>
        `;
      });

      document.getElementById('cartTotal').innerHTML = `
        <h4>Grand Total: â‚¹${total}</h4>
        <button class="btn btn-primary w-100 mt-3" onclick="checkout()">Checkout All</button>
      `;
    }

    function updateQty(productId, change) {
      cart = cart.map(item => {
        if(item.productId === productId) item.qty = Math.max(1, item.qty + change);
        return item;
      });
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
      updateCartBadge();
    }

    function removeItem(productId) {
      cart = cart.filter(item => item.productId !== productId);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
      updateCartBadge();
    }

    function checkout() {
      if(cart.length === 0) return alert("Cart is empty!");
      alert("Order placed successfully!");
      cart = [];
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
      updateCartBadge();
    }

    renderCart();
    updateCartBadge();
  </script>
</body>
</html>
