<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HerbsTea - Admin Panel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f5fff7; font-family: 'Segoe UI', sans-serif; color: #2d4739; }
    .navbar { background: linear-gradient(90deg, #2e7d32, #66bb6a); }
    .table th, .table td { vertical-align: middle; }
    .btn-edit { background: #0288d1; color: #fff; }
    .btn-delete { background: #d32f2f; color: #fff; }
    .btn-add { background: #388e3c; color: #fff; margin-bottom: 15px; }
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark shadow">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="index.html">ðŸŒ¿ HerbsTea Admin</a>
    </div>
  </nav>

  <section class="container my-5">
    <h2 class="text-center mb-4">Admin Dashboard</h2>

    <!-- Add Product Form -->
    <div class="mb-4">
      <h4>Add New Product</h4>
      <div class="row g-2">
        <div class="col-md-4">
          <input type="text" id="newProdName" class="form-control" placeholder="Product Name">
        </div>
        <div class="col-md-3">
          <input type="number" id="newProdPrice" class="form-control" placeholder="Price">
        </div>
        <div class="col-md-4">
          <input type="text" id="newProdImage" class="form-control" placeholder="Image URL">
        </div>
        <div class="col-md-1">
          <button class="btn btn-add" onclick="addProduct()">Add</button>
        </div>
      </div>
    </div>

    <h4>All Products</h4>
    <table class="table table-bordered mt-3">
      <thead class="table-success">
        <tr>
          <th>ID</th>
          <th>Image</th>
          <th>Name</th>
          <th>Price</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="productTable"></tbody>
    </table>

    <h4 class="mt-5">All Orders</h4>
    <table class="table table-bordered mt-3">
      <thead class="table-warning">
        <tr>
          <th>Order #</th>
          <th>Products</th>
          <th>Total Amount</th>
        </tr>
      </thead>
      <tbody id="orderTable"></tbody>
    </table>
  </section>
  

  <script>
    // Load products from localStorage or default list
    const products = JSON.parse(localStorage.getItem('products')) || [
      {id:1, name:"Organic Green Tea", price:150, img:"https://th.bing.com/th/id/OIP.pgedhJZo7rutkhgAzvuV9QHaE8?w=281&h=187&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      {id:2, name:"Chamomile Tea", price:200, img:"https://th.bing.com/th/id/OIP.Z9YC1AoQAs7upYnM3snwvgHaHa?w=196&h=196&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3"},
      // ...add all other products here
    ];
    localStorage.setItem('products', JSON.stringify(products));

    // Render dashboard immediately
    renderProducts();
    renderOrders();

    // Add new product
    function addProduct() {
      const name = document.getElementById('newProdName').value.trim();
      const price = parseInt(document.getElementById('newProdPrice').value);
      const img = document.getElementById('newProdImage').value.trim();
      if(name && price && img) {
        const id = products.length ? products[products.length-1].id + 1 : 1;
        products.push({id, name, price, img});
        localStorage.setItem('products', JSON.stringify(products));
        renderProducts();
        document.getElementById('newProdName').value = '';
        document.getElementById('newProdPrice').value = '';
        document.getElementById('newProdImage').value = '';
      } else {
        alert('Please fill all product fields!');
      }
    }

    // Render products table
    function renderProducts() {
      const table = document.getElementById('productTable');
      table.innerHTML = '';
      products.forEach(p => {
        table.innerHTML += `
          <tr>
            <td>${p.id}</td>
            <td><img src="${p.img}" width="50"></td>
            <td>${p.name}</td>
            <td>â‚¹${p.price}</td>
            <td>
              <button class="btn btn-edit btn-sm" onclick="editProduct(${p.id})">Edit</button>
              <button class="btn btn-delete btn-sm" onclick="deleteProduct(${p.id})">Delete</button>
            </td>
          </tr>
        `;
      });
    }

    // Edit product
    function editProduct(id) {
      const prod = products.find(p => p.id === id);
      const newName = prompt("Edit Name:", prod.name);
      const newPrice = prompt("Edit Price:", prod.price);
      if(newName && newPrice) {
        prod.name = newName;
        prod.price = parseInt(newPrice);
        localStorage.setItem('products', JSON.stringify(products));
        renderProducts();
      }
    }

    // Delete product
    function deleteProduct(id) {
      if(confirm("Are you sure to delete this product?")) {
        const index = products.findIndex(p => p.id === id);
        products.splice(index, 1);
        localStorage.setItem('products', JSON.stringify(products));
        renderProducts();
      }
    }

    // Render orders
    function renderOrders() {
      const orders = JSON.parse(localStorage.getItem('orders')) || [];
      const table = document.getElementById('orderTable');
      table.innerHTML = '';
      orders.forEach((order, i) => {
        let orderProducts = order.items.map(it => {
          let p = products.find(pr => pr.id === it.productId);
          return `${p.name} (x${it.qty})`;
        }).join(", ");
        table.innerHTML += `
          <tr>
            <td>${i+1}</td>
            <td>${orderProducts}</td>
            <td>â‚¹${order.total}</td>
          </tr>
        `;
      });
    }
  </script>

</body>
</html>
